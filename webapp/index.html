<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta charset="UTF-8">

		<title>KAP 7</title>

		<script id="sap-ui-bootstrap"
			src="../../resources/sap-ui-core.js"
			data-sap-ui-libs="sap.m,sap.ui.layout"
			data-sap-ui-theme="sap_bluecrystal"
			data-sap-ui-compatVersion="edge"
			data-sap-ui-resourceroots='{"KAP7": ""}'>
		</script>
	<script>
	
		var sServiceURL = "../destinations/northwind/V3/Northwind/Northwind.svc/";
		// instantiate the model
		var oModel = sap.ui.model.odata.v2.ODataModel(sServiceURL);
		// don't batch the requests for now
		oModel.setUseBatch(false);
		oModel.attachMetadataLoaded(function () {
			var oMetaData = oModel.getServiceMetadata();
			console.log("Service Metadata", oMetaData);
		});
		
		function fnSuccess(oData, oResponse){
			console.log("Data", oData);
			console.log("Response", oResponse);
		}
		function fnError(oError){
			console.log("Error, oError");	
		}
		var oProduct1 = oModel.getData("/Products(1)");
		var oProduct1Name = oModel.getProperty("/Products(1)/ProductName");
		console.log("Product 1 from Model", oProduct1Name);
		console.log("Product 1 name from Model", oProduct1Name);
		// var oProducts2 = oModel.getData("/Products(2)");
		// console.log("Data from Product 2 (not available)", oProduct2);
		oModel.read("/Products(1)",{
			success: fnSuccess,
			error: fnError
		});
		/*
		oModel.read("/Products(abc)",{
			success: fnSuccess,
			error: fnError
		});*/

		sap.ui.getCore().setModel(oModel);
	
		var oText = new sap.m.Text({
			text: "Product name: {ProductName}"
		});
		oText.addStyleClass("sapUiMediumMargin");
		
		var oPageMaster = new sap.m.Page("masterPage", {
			title: "Product 1 Info",
			content:[oText]
		});
		oPageMaster.bindElement("/Products(1)");
		var oApp = new sap.m.App();
		oApp.addPage(oPageMaster);
		oApp.placeAt("content");
	</script>
</head>
	<body class="sapUiBody" role="application">
		<div id="content">Open the debugger tools and look at your console.</div>
	</body>
</html>